<!DOCTYPE html>
<html>
<head>
    <title>D3.js Test</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body { background: #1a1a1a; color: white; }
        svg { background: #2a2a2a; border: 1px solid #444; }
    </style>
</head>
<body>
    <h2>D3.js Network Test</h2>
    <svg id="test-svg" width="600" height="400"></svg>
    
    <script>
        console.log('D3 version:', d3.version);
        
        const svg = d3.select('#test-svg');
        const width = 600;
        const height = 400;
        
        const nodes = [
            { id: 'center', x: width/2, y: height/2, type: 'requester' },
            { id: 'node1', x: 150, y: 150, type: 'provider' },
            { id: 'node2', x: 450, y: 150, type: 'provider' },
            { id: 'node3', x: 150, y: 250, type: 'provider' },
            { id: 'node4', x: 450, y: 250, type: 'provider' }
        ];
        
        const links = [
            { source: 'center', target: 'node1' },
            { source: 'center', target: 'node2' },
            { source: 'center', target: 'node3' },
            { source: 'center', target: 'node4' }
        ];
        
        // Draw links
        svg.selectAll('line')
           .data(links)
           .join('line')
           .attr('x1', d => nodes.find(n => n.id === d.source).x)
           .attr('y1', d => nodes.find(n => n.id === d.source).y)
           .attr('x2', d => nodes.find(n => n.id === d.target).x)
           .attr('y2', d => nodes.find(n => n.id === d.target).y)
           .attr('stroke', '#4ADE80')
           .attr('stroke-width', 2);
        
        // Draw nodes
        svg.selectAll('circle')
           .data(nodes)
           .join('circle')
           .attr('cx', d => d.x)
           .attr('cy', d => d.y)
           .attr('r', d => d.type === 'requester' ? 20 : 12)
           .attr('fill', d => d.type === 'requester' ? '#00FFFF' : '#8B5CF6')
           .attr('stroke', '#fff')
           .attr('stroke-width', 2);
        
        // Add labels
        svg.selectAll('text')
           .data(nodes)
           .join('text')
           .attr('x', d => d.x)
           .attr('y', d => d.y + 4)
           .attr('text-anchor', 'middle')
           .attr('fill', 'white')
           .attr('font-size', '10px')
           .text(d => d.id);
           
        console.log('D3 test rendered successfully!');
    </script>
</body>
</html>
